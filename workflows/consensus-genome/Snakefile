"""
Snakefile for consensus genome workflow.
"""

import os

project_root = os.path.abspath(os.path.join(os.path.dirname(workflow.snakefile), "../.."))

configfile: os.path.join(project_root, "workflows/consensus-genome/config.yaml")

rule consensus_genome_main:
    input:
        "data/input/sample1.fastq"
    output:
        "data/output/consensus-genome.done"
    params:
        max_reads = config.get("max_reads")
    script:
        "../../scripts/consensus-genome.py"


rule align_reads_step:
    input:
        "data/output/trimmed-sample1.fastq"
    output:
        "data/output/trimmed-sample1.sam"
    resources:
        cpus=8,
        mem_mb=16000  # 16 GB RAM
    # shell:
    #     "python src/align.py {input} {output}"